doctype html
html(lang="en")
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title User Registration - CraftSmart
    link(rel='stylesheet', href='/css/user-register.css')
    script(src='https://cdn.tailwindcss.com')

  body(class='bg-gray-100 min-h-screen flex items-center justify-center')
    .register-container(class='bg-white p-8 rounded shadow-md w-full max-w-lg')
      h2(class='text-2xl font-bold mb-6 text-center text-blue-600') Register

      form(action='/register', method='POST')
        .mb-4
          label(for='username' class='block mb-1 font-semibold') Username
          input#username(type='text', name='username', required, placeholder='Enter your username' class='w-full border px-3 py-2 rounded')

        .mb-4
          label(for='email' class='block mb-1 font-semibold') Email (optional)
          input#email(type='email', name='email', placeholder='Enter your email' class='w-full border px-3 py-2 rounded')

        .mb-4
          label(for='password' class='block mb-1 font-semibold') Password
          input#password(type='password', name='password', required, placeholder='Enter your password' class='w-full border px-3 py-2 rounded')

        .mb-4
          label(for='role' class='block mb-1 font-semibold') Register as:
          select#role(name='role', required class='w-full border px-3 py-2 rounded')
            option(value='') Select a role
            option(value='employer') Employer
            option(value='craftsman') Craftsman

        .mb-4
          label(for='mobileNumber' class='block mb-1 font-semibold') Mobile Number
          input#mobileNumber(type='text', name='mobileNumber', required, placeholder='e.g. +256712345678' class='w-full border px-3 py-2 rounded')

        .mb-4
          label(class='block mb-1 font-semibold') Location (Region, District, City/Neighborhood)
          select#region.mb-2(name='region', required onchange='populateDistricts()' class='w-full border px-3 py-2 rounded')
            option(value='') Select Region
            option(value='Central') Central
            option(value='Eastern') Eastern
            option(value='Northern') Northern
            option(value='Western') Western

          select#district.mb-2(name='district', required onchange='populateCities()' class='w-full border px-3 py-2 rounded')
            option(value='') Select District

          select#city(name='city', required class='w-full border px-3 py-2 rounded')
            option(value='') Select City / Neighborhood

        .mb-4
          label(for='skills' class='block mb-1 font-semibold') Skills (comma-separated)
          input#skills(type='text', name='skills', placeholder='e.g. plumbing, carpentry' class='w-full border px-3 py-2 rounded')

        .mb-4
          label(for='bio' class='block mb-1 font-semibold') Bio
          textarea#bio(name='bio', rows='7', class='w-full border px-3 py-2 rounded') 
            | Born: _______________
            | 
            | Gender: _______________
            | 
            | Languages: _______________
            | 
            | Years of Experience: _______________
            | 
            | About me: I am a highly skilled _______________ with over __ years of hands-on experience. 
            | I have worked on various projects including _______________. I take pride in delivering 
            | quality work and maintaining good communication with clients.

        button(type='submit' class='w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition') Register

      .mt-6.text-center
        a(href='/' class='text-blue-600 hover:underline') ‚Üê Back to Home

    script.
      const districts = {
        Central: {
          Kampala: [
            "Muyenga", "Lweza", "Kabalagala", "Munyonyo", "Ntinda", "Naguru", "Buziga", 
            "Bugolobi", "Makindye", "Kololo", "Kansanga", "Kyambogo", "Rubaga", 
            "Nakawa", "Bukoto", "Kamwokya", "Nsambya", "Bweyogerere", "Namugongo", 
            "Kasubi", "Mutungo", "Kireka", "Mengo", "Kikoni"
          ],
          Wakiso: ["Entebbe", "Kira", "Nansana", "Kasangati", "Gayaza", "Bulenga"],
          Mukono: ["Mukono Town", "Seeta", "Namilyango"]
        },
        Eastern: {
          Jinja: ["Bugembe", "Mpumudde", "Wanyange"],
          Mbale: ["Industrial", "Wanale", "Namakwekwe"],
          Tororo: ["Malaba", "Mukuju"]
        },
        Northern: {
          Gulu: ["Pece", "Layibi"],
          Lira: ["Ojwina", "Adyel"],
          Arua: ["River Oli", "Adumi"]
        },
        Western: {
          Mbarara: ["Kamukuzi", "Kakoba"],
          Kabale: ["Central", "Kigongi"],
          FortPortal: ["East Division", "West Division"]
        }
      };

      function populateDistricts() {
        const region = document.getElementById("region").value;
        const districtSelect = document.getElementById("district");
        const citySelect = document.getElementById("city");
        districtSelect.innerHTML = '<option value="">Select District</option>';
        citySelect.innerHTML = '<option value="">Select City / Neighborhood</option>';
        if (region && districts[region]) {
          Object.keys(districts[region]).forEach(district => {
            const option = document.createElement("option");
            option.value = district;
            option.text = district;
            districtSelect.appendChild(option);
          });
        }
      }

      function populateCities() {
        const region = document.getElementById("region").value;
        const district = document.getElementById("district").value;
        const citySelect = document.getElementById("city");
        citySelect.innerHTML = '<option value="">Select City / Neighborhood</option>';
        if (region && district && districts[region][district]) {
          districts[region][district].forEach(city => {
            const option = document.createElement("option");
            option.value = city;
            option.text = city;
            citySelect.appendChild(option);
          });
        }
      }
