doctype html
html(lang="en")
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title User Registration - CraftSmart
    link(rel='stylesheet', href='/css/user-register.css')
    script(src='https://cdn.tailwindcss.com')

  body
    .register-container
      h2 Register

      form(action='/register', method='POST')
        .mb-4
          label(for='username') Username
          input#username(type='text', name='username', required, placeholder='Enter your username')

        .mb-4
          label(for='email') Email (optional)
          input#email(type='email', name='email', placeholder='Enter your email')

        .mb-4
          label(for='password') Password
          input#password(type='password', name='password', required, placeholder='Enter your password')

        .mb-4
          label(for='role') Register as:
          select#role(name='role', required)
            option(value='') Select a role
            option(value='employer') Employer
            option(value='craftsman') Craftsman

        .mb-4
          label(for='mobileNumber') Mobile Number
          input#mobileNumber(type='text', name='mobileNumber', required, placeholder='e.g. +256712345678')

        .mb-4
          label Location (Region, District, Sub-county)
          select#region.mb-2(name='region', required, onchange='populateDistricts()')
            option(value='') Select Region
            option(value='Central') Central
            option(value='Eastern') Eastern
            option(value='Northern') Northern
            option(value='Western') Western

          select#district.mb-2(name='district', required, onchange='populateCities()')
            option(value='') Select District

          select#city(name='city', required)
            option(value='') Select Sub-county / City

        .mb-4
          label(for='skills') Skills (comma-separated)
          input#skills(type='text', name='skills', placeholder='e.g. plumbing, carpentry')

        .mb-4
          label(for='bio') Bio
          textarea#bio(name='bio', rows='3', placeholder='Tell us a bit about yourself...')

        button(type='submit') Register

    script.
      const districts = {
        Central: {
          Kampala: ["Rubaga", "Nakawa", "Makindye"],
          Wakiso: ["Entebbe", "Kira", "Nansana"],
          Mukono: ["Mukono Town", "Seeta", "Namilyango"]
        },
        Eastern: {
          Jinja: ["Bugembe", "Mpumudde"],
          Mbale: ["Industrial", "Wanale"],
          Tororo: ["Malaba", "Mukuju"]
        },
        Northern: {
          Gulu: ["Pece", "Layibi"],
          Lira: ["Ojwina", "Adyel"],
          Arua: ["River Oli", "Adumi"]
        },
        Western: {
          Mbarara: ["Kamukuzi", "Kakoba"],
          Kabale: ["Central", "Kigongi"],
          FortPortal: ["East Division", "West Division"]
        }
      };

      function populateDistricts() {
        const region = document.getElementById("region").value;
        const districtSelect = document.getElementById("district");
        const citySelect = document.getElementById("city");
        districtSelect.innerHTML = '<option value="">Select District</option>';
        citySelect.innerHTML = '<option value="">Select Sub-county / City</option>';
        if (region && districts[region]) {
          Object.keys(districts[region]).forEach(district => {
            const option = document.createElement("option");
            option.value = district;
            option.text = district;
            districtSelect.appendChild(option);
          });
        }
      }

      function populateCities() {
        const region = document.getElementById("region").value;
        const district = document.getElementById("district").value;
        const citySelect = document.getElementById("city");
        citySelect.innerHTML = '<option value="">Select Sub-county / City</option>';
        if (region && district && districts[region][district]) {
          districts[region][district].forEach(city => {
            const option = document.createElement("option");
            option.value = city;
            option.text = city;
            citySelect.appendChild(option);
          });
        }
      }
